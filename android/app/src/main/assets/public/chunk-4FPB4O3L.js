import{B as H,D as L,E as q,F as D,M as R,N as B,a as N,b as T,c as w,f as $,i as F,k as j,r as k,u as O,v as V,x as U,z as A}from"./chunk-52UE2MJF.js";import"./chunk-G5DBTQCY.js";import{Ba as S,Fa as h,Ma as u,N as C,Oa as s,Pa as a,S as P,Ta as b,Ua as x,Va as p,Z as _,_ as I,ab as m,bb as v,cb as y,l as E,sa as c,x as M,xa as g}from"./chunk-QI2UKG4A.js";import"./chunk-4G7SAIE5.js";import"./chunk-LRSHVU3G.js";import"./chunk-473DEPGT.js";import"./chunk-CKIBZVXW.js";import"./chunk-PS2NURIG.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-6MDLUQIX.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-RW4GY4BD.js";var J=(()=>{let t=class t{constructor(e){this.http=e,this.baseUrl="http://192.168.0.103:5000"}obtenerMaterias(e,i){let o=`${this.baseUrl}/profesor/${e}/grupos/${i}/materias`;return this.http.get(o).pipe(M(this.handleError))}handleError(e){return console.error("Error en MateriasProfesorService:",e),E(()=>e)}};t.\u0275fac=function(i){return new(i||t)(P($))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();function K(r,t){if(r&1){let n=b();s(0,"ion-item")(1,"ion-label")(2,"strong"),m(3),a()(),s(4,"ion-button",4),x("click",function(){let i=_(n).$implicit,o=p(2).$implicit,l=p();return I(l.irALista(o.nombre,i))}),m(5," Ver lista "),a()()}if(r&2){let n=t.$implicit;c(3),v(n)}}function Q(r,t){if(r&1&&(s(0,"div"),h(1,K,6,1,"ion-item",1),a()),r&2){let n=p().$implicit;c(),u("ngForOf",n.horarios)}}function W(r,t){if(r&1){let n=b();s(0,"ion-card")(1,"ion-card-header",3),x("click",function(){let i=_(n).$implicit,o=p();return I(o.toggleExpandir(i.nombre))}),s(2,"ion-card-title"),m(3),a()(),h(4,Q,2,1,"div",2),a()}if(r&2){let n=t.$implicit,e=p();c(3),v(n.nombre),c(),u("ngIf",e.materiaExpandida===n.nombre)}}function X(r,t){r&1&&(s(0,"div")(1,"p"),m(2,"No hay materias asignadas para este grupo."),a()())}var ae=(()=>{let t=class t{constructor(e,i,o){this.route=e,this.router=i,this.materiasService=o,this.grupoId=null,this.materias=[],this.grupoNombre="",this.materiaExpandida=null}ngOnInit(){this.grupoId=Number(this.route.snapshot.paramMap.get("grupoId")),this.grupoNombre=this.route.snapshot.queryParamMap.get("grupoNombre")||"";let e=localStorage.getItem("user");if(e){let o=JSON.parse(e).id;this.grupoId&&o&&this.materiasService.obtenerMaterias(o,this.grupoId).subscribe({next:l=>{let f={};l.forEach(d=>{f[d.nombre]||(f[d.nombre]={nombre:d.nombre,horarios:[]}),f[d.nombre].horarios.push(d.horario)}),this.materias=Object.values(f)},error:l=>{console.error("Error al obtener materias:",l)}})}}toggleExpandir(e){this.materiaExpandida=this.materiaExpandida===e?null:e}irALista(e,i){this.router.navigate(["/lista-profesor"],{queryParams:{grupoId:this.grupoId,grupoNombre:this.grupoNombre,materiaNombre:e,horario:i}})}};t.\u0275fac=function(i){return new(i||t)(g(F),g(j),g(J))},t.\u0275cmp=S({type:t,selectors:[["app-materias-profesor"]],decls:9,vars:3,consts:[[1,"ion-padding"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"cursor","pointer",3,"click"],["slot","end",3,"click"]],template:function(i,o){i&1&&(s(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),m(3),a()()(),s(4,"ion-content",0)(5,"h2"),m(6,"Materias asignadas"),a(),h(7,W,5,2,"ion-card",1)(8,X,3,0,"div",2),a()),i&2&&(c(3),y("Materias del grupo ",o.grupoNombre,""),c(4),u("ngForOf",o.materias),c(),u("ngIf",o.materias.length===0))},dependencies:[H,L,R,B,V,U,A,O,q,D,w,N,T,k],encapsulation:2});let r=t;return r})();export{ae as MateriasProfesorPage};
